/* ═══════════════════════════════════════════════════════════════
   SPLASH — COSMIC THRESHOLD
   A suspended moment before entering space-time
   ═══════════════════════════════════════════════════════════════ */

:root {
  --void: #000000;
  --text-ghost: rgba(255, 255, 255, 0.92);
  --text-faint: rgba(255, 255, 255, 0.55);
  --stellar-purple: #7c3aed;
  --electric-cyan: #06b6d4;
  --glow-subtle: rgba(124, 58, 237, 0.25);
  --glow-active: rgba(6, 182, 212, 0.35);
  --title-font: 'Cinzel', ui-serif, Georgia, 'Times New Roman', serif;
}

/* ─── Reset & Foundation ─── */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  margin: 0;
  font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--text-ghost);
  background: var(--void);
  position: relative;
  cursor: default;
}

html.js body {
  --boot-ease: cubic-bezier(0.19, 1, 0.22, 1);
}

html.js body.is-booting * {
  animation-play-state: paused !important;
}

html.js body.is-booting .void-video {
  opacity: 0;
}

html.js body.is-booting .threshold-inner,
html.js body.is-booting .threshold-line,
html.js body.is-booting .passage {
  opacity: 0;
  transform: translateY(24px);
}

/* ═══════════════════════════════════════════════════════════════
   VIDEO ENVIRONMENT — Infinite Void
   ═══════════════════════════════════════════════════════════════ */

.void-video {
  position: fixed;
  top: 50%;
  left: 50%;
  min-width: 100%;
  min-height: 100%;
  width: auto;
  height: auto;
  transform: translate(-50%, -50%);
  object-fit: cover;
  object-position: center;
  z-index: 1;
  opacity: 0;
  background: #000;
  filter: brightness(0.45) contrast(1.15) saturate(1.05);
  will-change: opacity;
}

html.js body.is-ready.has-video .void-video {
  animation:
    videoFadeIn 1.4s var(--boot-ease) 0s forwards,
    videoBreath 18s ease-in-out 1.6s infinite;
}

@keyframes videoFadeIn {
  to { opacity: 1; }
}

@keyframes videoBreath {
  0%, 100% {
    filter: brightness(0.44) contrast(1.14) saturate(1.03);
  }
  50% {
    filter: brightness(0.49) contrast(1.17) saturate(1.10);
  }
}

/* ─── Atmospheric Layers ─── */
.grain-overlay {
  position: fixed;
  inset: 0;
  z-index: 2;
  pointer-events: none;
  background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.95" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.35"/></svg>');
  opacity: 0.18;
  mix-blend-mode: overlay;
  animation: grainShift 1.8s steps(4) infinite;
}

@keyframes grainShift {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-2%, 3%); }
  20% { transform: translate(3%, -2%); }
  30% { transform: translate(-1%, 2%); }
  40% { transform: translate(2%, -3%); }
  50% { transform: translate(-3%, 1%); }
  60% { transform: translate(1%, -1%); }
  70% { transform: translate(-2%, 2%); }
  80% { transform: translate(2%, -1%); }
  90% { transform: translate(-1%, -2%); }
}

.vignette {
  position: fixed;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 35%,
    rgba(0, 0, 0, 0.4) 75%,
    rgba(0, 0, 0, 0.85) 100%
  );
}

/* ─── Scanline Effect ─── */
.scanline {
  position: fixed;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(to bottom,
    transparent,
    rgba(6, 182, 212, 0.8),
    transparent
  );
  box-shadow: 0 0 20px rgba(6, 182, 212, 0.6);
  z-index: 15;
  pointer-events: none;
  opacity: 0.28;
  animation: scanlineMove 8s linear infinite;
}

@keyframes scanlineMove {
  0% { top: -10%; }
  100% { top: 110%; }
}

/* ─── Floating Particles ─── */
.particles {
  position: fixed;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  overflow: hidden;
}

.particles::before,
.particles::after {
  content: "";
  position: absolute;
  width: 2px;
  height: 2px;
  border-radius: 50%;
  background: rgba(124, 58, 237, 0.6);
  box-shadow:
    0 0 8px rgba(124, 58, 237, 0.5),
    120vw 80vh 1px 0px rgba(6, 182, 212, 0.4),
    80vw 20vh 1px 1px rgba(124, 58, 237, 0.5),
    40vw 60vh 1px 0px rgba(6, 182, 212, 0.3),
    90vw 50vh 0px 1px rgba(124, 58, 237, 0.4),
    30vw 90vh 1px 0px rgba(6, 182, 212, 0.5),
    70vw 10vh 0px 1px rgba(124, 58, 237, 0.3),
    50vw 70vh 1px 1px rgba(6, 182, 212, 0.4),
    10vw 40vh 0px 0px rgba(124, 58, 237, 0.5),
    60vw 30vh 1px 0px rgba(6, 182, 212, 0.3);
  animation: particleFloat 25s linear infinite;
}

.particles::after {
  animation-delay: -12s;
  animation-duration: 32s;
}

@keyframes particleFloat {
  0% { transform: translateY(100vh) translateX(0); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-100vh) translateX(20px); opacity: 0; }
}

/* ═══════════════════════════════════════════════════════════════
   THRESHOLD — The Portal
   ═══════════════════════════════════════════════════════════════ */

.threshold {
  position: fixed;
  inset: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  overflow: visible;
}

.threshold-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8rem;
  opacity: 0;
  transform: translateY(40px);
  will-change: transform, opacity;
  position: relative;
  z-index: 0;
}

body.is-leaving .threshold-inner {
  animation: none !important;
  opacity: 0;
  transform: translateY(-10px) scale(0.99);
  filter: blur(10px);
  transition:
    opacity 1300ms cubic-bezier(0.19, 1, 0.22, 1),
    transform 1900ms cubic-bezier(0.19, 1, 0.22, 1),
    filter 1500ms cubic-bezier(0.19, 1, 0.22, 1);
}

body.is-leaving .threshold-line,
body.is-leaving .passage {
  animation: none !important;
}

.threshold-inner::before {
  content: "";
  position: absolute;
  inset: -22vh -18vw;
  z-index: -1;
  pointer-events: none;
  opacity: 0;
  transform: translateY(12px) scale(0.94);
  filter: blur(34px);
  background:
    radial-gradient(ellipse at 50% 35%, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0) 55%),
    radial-gradient(ellipse at 50% 35%, rgba(124, 58, 237, 0.22) 0%, rgba(124, 58, 237, 0) 62%),
    radial-gradient(ellipse at 50% 40%, rgba(6, 182, 212, 0.12) 0%, rgba(6, 182, 212, 0) 62%);
  mix-blend-mode: screen;
}

html.js body.is-ready .threshold-inner {
  animation: thresholdReveal 2.0s cubic-bezier(0.16, 1, 0.3, 1) 0.75s forwards;
}

html.js body.is-ready .threshold-inner::before {
  animation:
    projectorBloomIn 2.2s cubic-bezier(0.16, 1, 0.3, 1) 0.95s forwards,
    projectorBloomPulse 10s ease-in-out 3.4s infinite;
}

@keyframes projectorBloomIn {
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes projectorBloomPulse {
  0%, 100% {
    opacity: 0.78;
    filter: blur(34px);
  }
  50% {
    opacity: 1;
    filter: blur(40px);
  }
}

@keyframes thresholdReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ─── Invitation Text ─── */
.threshold-text {
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  font-family: var(--title-font);
  font-weight: 400;
  font-size: clamp(2.05rem, 4.8vw, 3.55rem);
  letter-spacing: 0.08em;
  line-height: 1.18;
  text-align: center;
  color: var(--text-ghost);
  text-shadow:
    0 0 48px rgba(0, 0, 0, 0.88),
    0 10px 28px rgba(0, 0, 0, 0.55),
    0 0 64px rgba(124, 58, 237, 0.25);
  transition: text-shadow 700ms cubic-bezier(0.19, 1, 0.22, 1);
}

.threshold-text:hover {
  text-shadow:
    0 0 56px rgba(0, 0, 0, 0.9),
    0 12px 34px rgba(0, 0, 0, 0.62),
    0 0 86px rgba(6, 182, 212, 0.16),
    0 0 86px rgba(124, 58, 237, 0.14);
}

.threshold-line {
  display: block;
  opacity: 0;
  transform: translateY(20px);
  will-change: transform, opacity;
}

html.js body.is-ready .threshold-line {
  animation: lineReveal 1.45s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.threshold-line:nth-child(1) {
  animation-delay: 1.15s;
}

.threshold-line:nth-child(2) {
  animation-delay: 1.45s;
}

.threshold-line--emphasis {
  font-weight: 700;
  letter-spacing: 0.03em;
  color: #ffffff;
  text-shadow:
    0 0 28px rgba(124, 58, 237, 0.28),
    0 0 14px rgba(6, 182, 212, 0.18);
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

@supports (-webkit-background-clip: text) {
  .threshold-line--emphasis {
    background: linear-gradient(
      90deg,
      #ffffff 0%,
      rgba(210, 244, 255, 0.98) 22%,
      rgba(203, 184, 255, 0.98) 52%,
      rgba(210, 244, 255, 0.98) 78%,
      #ffffff 100%
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    text-shadow: none;
    animation: shimmerFlow 14s linear infinite;
  }
}

@keyframes shimmerFlow {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.threshold-line--emphasis.glitch {
  animation: shimmerFlow 8s linear infinite, glitchPulse 0.1s steps(2) 1;
}

@keyframes glitchPulse {
  0%, 100% { transform: translate(0, 0); }
  33% { transform: translate(-2px, 1px); filter: hue-rotate(90deg); }
  66% { transform: translate(2px, -1px); filter: hue-rotate(-90deg); }
}

@keyframes lineReveal {
  from {
    opacity: 0;
    transform: translateY(22px);
    filter: blur(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0px);
  }
}

/* ─── Passage (CTA) ─── */
.passage {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 0.85rem;
  padding: 1.2rem 2.4rem;
  border: 1px solid rgba(255, 255, 255, 0.11);
  border-radius: 999px;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.07), rgba(255, 255, 255, 0.02)),
    rgba(8, 8, 12, 0.34);
  box-shadow: 
    0 0 0 1px rgba(124, 58, 237, 0.16),
    0 10px 34px rgba(0, 0, 0, 0.62),
    0 0 54px rgba(124, 58, 237, 0.10),
    inset 0 1px 0 rgba(255, 255, 255, 0.10);
  color: var(--text-ghost);
  font-family: inherit;
  font-size: 0.92rem;
  font-weight: 500;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  cursor: pointer;
  transition:
    transform 900ms cubic-bezier(0.19, 1, 0.22, 1),
    box-shadow 900ms cubic-bezier(0.19, 1, 0.22, 1),
    background 900ms cubic-bezier(0.19, 1, 0.22, 1),
    border-color 900ms cubic-bezier(0.19, 1, 0.22, 1);
  opacity: 0;
  transform: translateY(20px);
  will-change: transform, opacity;
}

@supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
  .passage {
    -webkit-backdrop-filter: blur(18px) saturate(140%);
    backdrop-filter: blur(18px) saturate(140%);
    background:
      linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02)),
      rgba(8, 8, 12, 0.22);
  }
}

html.js body.is-ready .passage {
  animation:
    passageReveal 1.55s cubic-bezier(0.16, 1, 0.3, 1) 1.85s forwards,
    breathe 4.4s ease-in-out 3.2s infinite;
}

@keyframes breathe {
  0%, 100% {
    box-shadow:
      0 0 0 1px rgba(124, 58, 237, 0.2),
      0 12px 40px rgba(0, 0, 0, 0.6),
      0 0 60px rgba(124, 58, 237, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(124, 58, 237, 0.2);
  }
  50% {
    box-shadow:
      0 0 0 1px rgba(124, 58, 237, 0.3),
      0 12px 40px rgba(0, 0, 0, 0.6),
      0 0 80px rgba(124, 58, 237, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.12),
      inset 0 -1px 0 rgba(124, 58, 237, 0.3);
  }
}

@keyframes passageReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.passage::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(135deg, rgba(124, 58, 237, 0.4), rgba(6, 182, 212, 0.3));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 800ms cubic-bezier(0.19, 1, 0.22, 1);
}

.passage:hover {
  border-color: rgba(6, 182, 212, 0.28);
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03)),
    rgba(8, 8, 12, 0.38);
  box-shadow: 
    0 0 0 1px rgba(6, 182, 212, 0.34),
    0 14px 46px rgba(0, 0, 0, 0.68),
    0 0 80px rgba(6, 182, 212, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
  transform: translateY(-4px);
}

.passage:hover::before {
  opacity: 1;
}

.passage:active {
  transform: translateY(-1px);
}

.passage-symbol {
  display: inline-block;
  font-size: 1.1rem;
  color: var(--stellar-purple);
  text-shadow: 0 0 20px rgba(124, 58, 237, 0.6);
  transition: all 600ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.passage:hover .passage-symbol {
  color: var(--electric-cyan);
  text-shadow: 0 0 30px rgba(6, 182, 212, 0.8);
  transform: rotate(90deg) scale(1.15);
}

.passage-label {
  display: inline-block;
  transition: all 400ms cubic-bezier(0.19, 1, 0.22, 1);
}

.passage:hover .passage-label {
  letter-spacing: 0.16em;
}

/* ═══════════════════════════════════════════════════════════════
   DISSOLVE — Cinematic Transition Out
   ═══════════════════════════════════════════════════════════════ */

.dissolve {
  position: fixed;
  inset: 0;
  z-index: 999;
  background: radial-gradient(
    ellipse at center,
    rgba(6, 182, 212, 0.15) 0%,
    rgba(124, 58, 237, 0.2) 40%,
    #000000 100%
  );
  opacity: 0;
  pointer-events: none;
  transform: scale(1.02);
  filter: blur(0px);
  backdrop-filter: blur(0px);
}

.dissolve::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.35"/></svg>');
  mix-blend-mode: overlay;
}

.dissolve.active {
  animation: dissolveIn 2400ms cubic-bezier(0.19, 1, 0.22, 1) forwards;
  pointer-events: all;
  backdrop-filter: blur(20px);
}

.dissolve.active::before {
  opacity: 0.22;
}

@keyframes dissolveIn {
  0% {
    opacity: 0;
    transform: scale(1.02);
    filter: blur(0px);
  }
  35% {
    opacity: 0.35;
    transform: scale(1.01);
    filter: blur(6px);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(18px);
  }
}

body.is-leaving .void-video {
  animation: none !important;
  opacity: 0;
  transition: opacity 2200ms cubic-bezier(0.19, 1, 0.22, 1);
}

/* ═══════════════════════════════════════════════════════════════
   RESPONSIVE — Mobile Threshold
   ═══════════════════════════════════════════════════════════════ */

@media (max-width: 720px) {
  .threshold-inner {
    gap: 3.5rem;
  }
  
  .threshold-text {
    font-size: clamp(1.5rem, 6vw, 2.2rem);
    letter-spacing: 0.06em;
  }
  
  .passage {
    padding: 1rem 2rem;
    font-size: 0.88rem;
  }
}

@media (max-width: 480px) {
  .threshold-inner {
    gap: 3rem;
  }
  
  .threshold-text {
    font-size: clamp(1.3rem, 7vw, 1.9rem);
  }
  
  .passage {
    padding: 0.95rem 1.8rem;
    gap: 0.7rem;
  }
}

/* ─── Accessibility & Motion ─── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .void-video {
    opacity: 0.7;
  }

  .threshold-inner::before {
    animation: none;
    opacity: 0;
  }
  
  .grain-overlay,
  .particles::before,
  .particles::after,
  .scanline {
    animation: none;
    opacity: 0;
  }
  
  .threshold-text {
    animation: none;
    transform: none;
  }
  
  .threshold-line--emphasis {
    animation: none;
    background: none;
    -webkit-text-fill-color: initial;
    color: #ffffff;
    text-shadow: 0 0 24px rgba(124, 58, 237, 0.22);
  }
}
